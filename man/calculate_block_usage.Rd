% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ccusage.R
\name{calculate_block_usage}
\alias{calculate_block_usage}
\title{Calculate Token Usage for 5-Hour Block}
\usage{
calculate_block_usage(blocks_data, current_window)
}
\arguments{
\item{blocks_data}{Blocks data tibble from [load_cached_ccusage()] with
"blocks" type. Must contain `timestamp` and `totalTokens` columns.}

\item{current_window}{List from [get_current_block_window()] containing
`block_start`, `block_end`, and `time_remaining` fields.}
}
\value{
List containing:
  - `tokens_used`: Numeric, tokens used in the current block
  - `tokens_limit`: Numeric, token limit per block (default 88000)
  - `usage_pct`: Integer, percentage of block limit used (0-100)
  - `time_remaining`: difftime object, time remaining in the block
  - `block_start`: POSIXct, block start time
  - `block_end`: POSIXct, block end time
}
\description{
Calculates token usage statistics for the current 5-hour block. Filters the blocks
data to entries within the specified block window and aggregates token counts.
Returns usage metrics and percentage of the 88,000-token block limit.
}
\details{
Calculate Max5 block usage from blocks data
}
\examples{
\dontrun{
# Get current block window
window <- get_current_block_window()

# Load blocks data
blocks <- load_cached_ccusage("blocks")

# Calculate usage
usage <- calculate_block_usage(blocks, window)
print(usage$usage_pct)
}

}
\seealso{
- [get_current_block_window()] to get the block window
- [show_max5_block_status()] to display formatted block status
- [get_block_history()] to view historical blocks
}
\keyword{internal}
