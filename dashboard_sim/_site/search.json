[
  {
    "objectID": "quantitativo.com_spy_2.11_sharpe.html",
    "href": "quantitativo.com_spy_2.11_sharpe.html",
    "title": "trading multiple instruments in parallel",
    "section": "",
    "text": "# Load required packages\npacman::p_load(\n  tidyverse,\n  lubridate,\n  tidyquant,\n  RcppRoll\n)\n\n# Load data\n\n# Set the start and end dates for the data\nstart_date &lt;-\n  today() - years(30)\nend_date &lt;- today()\n\n# Download the daily OHLC data for SPY\ndata_raw &lt;- tq_get(\n  \"SPY\",\n  get = \"stock.prices\",\n  from = start_date,\n  to = end_date,\n  complete_cases = TRUE\n)\n#   |&gt; mutate(Date = dmy(Date))\n\n# Convert the data to a tibble\nspy_data &lt;- as_tibble(data_raw)\nglimpse(spy_data)\n\nRows: 7,552\nColumns: 8\n$ symbol   &lt;chr&gt; \"SPY\", \"SPY\", \"SPY\", \"SPY\", \"SPY\", \"SPY\", \"SPY\", \"SPY\", \"SPY\"…\n$ date     &lt;date&gt; 1994-07-21, 1994-07-22, 1994-07-25, 1994-07-26, 1994-07-27, …\n$ open     &lt;dbl&gt; 45.17188, 45.37500, 45.35938, 45.39062, 45.35938, 45.35938, 4…\n$ high     &lt;dbl&gt; 45.29688, 45.40625, 45.45312, 45.42188, 45.35938, 45.57812, 4…\n$ low      &lt;dbl&gt; 45.07812, 45.25000, 45.31250, 45.31250, 45.17188, 45.35938, 4…\n$ close    &lt;dbl&gt; 45.26562, 45.34375, 45.40625, 45.35938, 45.35938, 45.45312, 4…\n$ volume   &lt;dbl&gt; 86300, 151600, 120900, 489600, 83200, 828200, 459100, 486300,…\n$ adjusted &lt;dbl&gt; 26.39271, 26.43827, 26.47473, 26.44740, 26.44740, 26.50205, 2…\n\n# Compute rolling mean of High - Low over last 25 days\nspy_data &lt;- spy_data %&gt;%\n  mutate(HML_rolling_mean = roll_mean(high - low, n = 25, fill = NA))\n# Compute IBS indicator\nspy_data &lt;- spy_data %&gt;%\n  mutate(IBS = (close - low) / (high - low))\n\n# Compute lower band\nspy_data &lt;- spy_data %&gt;%\n  mutate(\n    HML_rolling_10 = \n        roll_max(high, n = 10, fill = NA) - \n        roll_min(low, n = 10, fill = NA),\n    lower_band = roll_max(high, n = 10, fill = NA) - 2.5 * HML_rolling_mean\n  )\n\n# Initialize strategy variables\nspy_data &lt;- spy_data %&gt;%\n  mutate(\n    signal = 0,\n    position = 0,\n    `300_sma` = roll_mean(close, n = 300, fill = NA)\n  )\n\n# Apply strategy rules\nspy_data &lt;- spy_data %&gt;%\n  mutate(\n    signal = case_when(\n      close &lt; lower_band & IBS &lt; 0.3 ~ 1, # Go long\n      close &gt; lag(high, 1) ~ 0, # Close trade\n      close &lt; `300_sma` ~ 0, # Close trade\n      TRUE ~ lag(signal, 1)\n    ),\n    position = lag(position, 1, 0) + signal - lag(signal, 1, 0),\n    strategy_returns = log(close / lag(close, 1)) * lag(position, 1)\n  )\n\n# Calculate strategy performance\ntotal_return &lt;- prod(1 + spy_data$strategy_returns, na.rm = TRUE)\nannual_return &lt;- total_return^(1 / as.numeric(max(spy_data$date) - min(spy_data$date), units = \"days\") / 365) - 1\n\nprint(paste(\"Total Return:\", total_return))\n\n[1] \"Total Return: 2.82132388230356\"\n\nprint(paste(\"Annual Return:\", annual_return))\n\n[1] \"Annual Return: 2.59370325883523e-07\"\n\n# Parameter exploration\n# ... (code for running experiments with varying parameters)\n\n# Statistical analysis\n# ... (code for analyzing statistical properties of the edge)\n\n# Multi-instrument strategy\n# ... (code for trading multiple instruments in parallel)"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site"
  }
]